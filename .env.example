# ===================================================================
# Crypto Futures AI Trading System - Environment Configuration
# ===================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
# ===================================================================

# ===================================================================
# Database Configuration
# ===================================================================
POSTGRES_USER=trading_admin
POSTGRES_PASSWORD=secure_password_change_me_in_production
POSTGRES_DB=crypto_trading
DATABASE_URL=postgresql://trading_admin:secure_password_change_me_in_production@localhost:5432/crypto_trading

# ===================================================================
# Redis Configuration
# ===================================================================
REDIS_URL=redis://localhost:6379/0

# ===================================================================
# Binance API Configuration
# ===================================================================
# Get your API keys from: https://www.binance.com/en/my/settings/api-management
# IMPORTANT: Enable "Futures" permission and whitelist your IP
BINANCE_API_KEY=your_binance_api_key_here
BINANCE_API_SECRET=your_binance_api_secret_here

# Testnet Configuration (for paper trading)
# Get testnet keys from: https://testnet.binancefuture.com/
BINANCE_TESTNET=true
BINANCE_TESTNET_API_KEY=your_testnet_api_key_here
BINANCE_TESTNET_API_SECRET=your_testnet_api_secret_here

# ===================================================================
# Trading Configuration
# ===================================================================
# Trading Mode: paper (testnet) or live (real money)
TRADING_MODE=paper

# Symbol Configuration
TRADING_SYMBOLS=BTCUSDT,ETHUSDT
PRIMARY_SYMBOL=BTCUSDT

# Capital Management
INITIAL_CAPITAL=10000  # Starting capital in USDT
MAX_POSITION_SIZE=0.08  # Maximum 8% of capital per position
MAX_LEVERAGE=5  # Maximum leverage (1-125)

# ===================================================================
# Risk Management Configuration
# ===================================================================
# Position Level
STOP_LOSS_PCT=0.005  # 0.5% stop loss
TAKE_PROFIT_PCT=0.015  # 1.5% take profit

# Daily Level
MAX_DAILY_LOSS=0.02  # 2% maximum daily loss
MAX_DAILY_TRADES=15  # Maximum trades per day
MAX_CONSECUTIVE_LOSSES=8  # Stop after 8 consecutive losses

# System Level
MAX_DRAWDOWN=0.05  # 5% maximum drawdown - EMERGENCY SHUTDOWN
MIN_SHARPE_RATIO=0.5  # Minimum acceptable Sharpe ratio
EMERGENCY_VOLATILITY_MULTIPLIER=3.0  # Shutdown if volatility > 3x average

# ===================================================================
# Model Configuration
# ===================================================================
# Layer 1: Regime Classifier
REGIME_MODEL=lightgbm  # lightgbm, xgboost, tft
REGIME_LOOKBACK_PERIODS=200  # Historical periods to analyze

# Layer 2: Pattern Recognizer
PATTERN_MODEL=tsmixer  # tsmixer, patchtst, ensemble
PATTERN_SEQUENCE_LENGTH=100

# Layer 3: Signal Generator
SIGNAL_MODEL=xgboost  # xgboost, tabnet, catboost, ensemble
SIGNAL_CONFIDENCE_THRESHOLD=0.65  # Minimum confidence to act

# Layer 4: Position Manager
POSITION_MODEL=sac  # sac, ppo, rule_based
RL_UPDATE_FREQUENCY=1000  # Update RL model every N steps

# ===================================================================
# Triple Barrier Labeling
# ===================================================================
PROFIT_TARGET=0.015  # 1.5% profit target
STOP_LOSS_TARGET=0.005  # 0.5% stop loss
TIME_LIMIT_MINUTES=60  # Maximum holding period

# ===================================================================
# Data Collection Configuration
# ===================================================================
# Timeframes to collect (comma-separated)
TIMEFRAMES=1m,5m,15m,1h

# Historical data lookback
HISTORICAL_DAYS=730  # 2 years of historical data

# Real-time data collection
ENABLE_REALTIME_COLLECTION=true
ORDERBOOK_DEPTH=10  # Top 10 levels
TRADES_LIMIT=1000  # Recent 1000 trades

# Data collection frequency (seconds)
OHLCV_UPDATE_FREQ=60  # 1 minute
FUNDING_RATE_UPDATE_FREQ=300  # 5 minutes
ORDERBOOK_UPDATE_FREQ=1  # 1 second (WebSocket)

# ===================================================================
# Backtesting Configuration
# ===================================================================
# Walk-Forward Validation
BACKTEST_START_DATE=2023-01-01
BACKTEST_END_DATE=2024-12-31
TRAIN_WINDOW_DAYS=180  # 6 months training
TEST_WINDOW_DAYS=30  # 1 month testing
WALK_FORWARD_STEP_DAYS=30  # Move forward 1 month each step

# Transaction Costs
MAKER_FEE=0.0002  # 0.02% (Binance VIP 0)
TAKER_FEE=0.0004  # 0.04%
SLIPPAGE_BPS=5  # 5 basis points slippage

# ===================================================================
# System Configuration
# ===================================================================
# Environment
PYTHON_ENV=production  # development, production

# Logging
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FILE=logs/trading.log
LOG_ROTATION=10 MB
LOG_RETENTION=30 days

# Performance
MAX_WORKERS=4  # Parallel processing workers
ENABLE_JIT=true  # Enable Numba JIT compilation
USE_GPU=false  # Enable GPU acceleration (if available)

# Monitoring
ENABLE_PROMETHEUS=true
PROMETHEUS_PORT=9090
ENABLE_TENSORBOARD=true
TENSORBOARD_PORT=6006

# ===================================================================
# API Server Configuration
# ===================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=2
ENABLE_CORS=true
CORS_ORIGINS=http://localhost:3000,http://localhost:8050

# ===================================================================
# Dashboard Configuration
# ===================================================================
DASHBOARD_HOST=0.0.0.0
DASHBOARD_PORT=8050
DASHBOARD_DEBUG=false

# ===================================================================
# Notification Configuration (Optional)
# ===================================================================
ENABLE_NOTIFICATIONS=false
NOTIFICATION_TYPE=telegram  # telegram, discord, email

# Telegram
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_telegram_chat_id

# Discord
DISCORD_WEBHOOK_URL=your_discord_webhook_url

# Email
EMAIL_SMTP_SERVER=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_FROM=your_email@gmail.com
EMAIL_PASSWORD=your_app_password
EMAIL_TO=alert_email@gmail.com

# ===================================================================
# Advanced Configuration
# ===================================================================
# Feature Engineering
ENABLE_TECHNICAL_INDICATORS=true
ENABLE_MARKET_MICROSTRUCTURE=true
ENABLE_SENTIMENT_ANALYSIS=false  # Phase 2

# Model Training
AUTO_RETRAIN=true
RETRAIN_FREQUENCY_HOURS=24  # Retrain models every 24 hours
MIN_TRAIN_SAMPLES=10000  # Minimum samples required for training

# Optimization
HYPERPARAMETER_OPTIMIZATION=false  # Enable Optuna optimization
OPTIMIZATION_TRIALS=100  # Number of optimization trials

# Debugging
ENABLE_DEBUG_MODE=false
SAVE_DEBUG_DATA=false
DEBUG_SAMPLE_RATE=0.1  # Save 10% of data for debugging
